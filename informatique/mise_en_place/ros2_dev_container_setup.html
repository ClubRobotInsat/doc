<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>ROS2 dev environment - Documentation Club Robot Insa Toulouse</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Documentation Club Robot Insa Toulouse</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="how-to-start-the-development-container-for--ros2-development"><a class="header" href="#how-to-start-the-development-container-for--ros2-development">How to start the development container for ü§ñ ROS2 development</a></h1>
<ol>
<li>
<p>üõ† Install VSCode or a JetBrainsIDE(Clion or Pycharm recommended). For JetBrains you have free student licences.
I personally recommend a JetBrians IDE over VSCode.</p>
</li>
<li>
<p>üê≥ Install <a href="https://docs.docker.com/engine/install/">docker engine</a>.
In linux don't forget to <a href="https://docs.docker.com/engine/install/linux-postinstall/">add yourself to the docker group</a>:</p>
<ol>
<li><code>sudo groupadd docker</code></li>
<li><code>sudo usermod -aG docker $USER</code></li>
<li><code>newgrp docker</code></li>
</ol>
</li>
<li>
<p>üìö git clone https://github.com/ClubRobotInsat/Info</p>
</li>
<li>
<p>If you're on windows you need to comment
the <code>"source=/tmp/.X11-unix,target=/tmp/.X11-unix,type=bind,consistency=cached"</code>
line in the <code>.devcontainer/devcontainer.json</code> file (comment is &lt;&lt; // &gt;&gt; as in C) at the end of the file.
This line allows you to use GUI apps from the container, which doesn't work on windows (no X11 on windows by default).</p>
</li>
<li>
<p>Follow the instruction based on your IDE</p>
</li>
</ol>
<h1 id="clion--pycharm--other-jetbrains"><a class="header" href="#clion--pycharm--other-jetbrains">CLion / Pycharm / Other JetBrains</a></h1>
<ol>
<li>Open the project folder</li>
<li>Open the <code>.devcontainer/devcontainer.json</code> file.</li>
<li>CLick on the blue cube to create a new dev container, the simplest option is to choose:
<code>Create Dev Container and mount sources</code> this will make the dev directory inside the container and the
"real" folder to be synced. This might have performance issues on windows, so if you know what you're doing
it might be worth to take a look at the clone option if you're on windows.
<img src="../../images/info/Clion_dev_container.png" alt="Clion_dev_container.png" /></li>
</ol>
<p>Clion should build the container, it might take some time, good internet can help.
Once its finished press continue:
<img src="../../images/info/Clion_build_dev-container.png" alt="continue" /></p>
<p>Again, it might take some time.</p>
<p>Once finished, your IDE should open, you're now in a virtual environment
with the right version of everything and ros2 installed!</p>
<p>When closing, chose close and stop to avoid performance and ressource
allocation(mostly ports) issues in your PC.</p>
<h1 id="vscode"><a class="header" href="#vscode">VSCode</a></h1>
<ol>
<li>Open the project folder</li>
<li>press ctr+shift+p</li>
<li>Run: <code>Dev Containers: Rebuild and Reopen in Container</code>. It might take some time, good internet can help</li>
</ol>
<h2 id="windows-docker-engine-install-details"><a class="header" href="#windows-docker-engine-install-details">Windows Docker engine install details</a></h2>
<p>Use the recommended settings, you can skip the login and the survey.</p>
<h1 id="why-and-how"><a class="header" href="#why-and-how">Why and how?</a></h1>
<p>For this tutorial you need to be familiar with the concept of docker container, container ports, and container volumes.
Look up a tutorial if you don't know what those are.</p>
<p>This process creates a container and makes your IDE connect to it as its "host" machine.
This enables people to work with the same exact environment independently of the underlying machine.
SO, basically we are creating a "light VM" so that everyone can work with ROS2 as the only officially
supported OS for ros2 humble (the latest LTS version when writing this doc) is ubuntu 22.04, which is already 2y old
and just getting older.
At the same time we are opening a port so that the IDE can connect though it (3000) and another one for ssh connexion
if needed (2222).
We also mout a volume from our repository into the dev container so that we can have all our files up to date all
the time.
This volume binding, goes through WSL on windows, which makes two "emulation" layers of the fyle system, docker and wls.
THis makes the fyle system really slow, so, cloning the repo inside the container might be wise if
performance is an issue on someone's PC.</p>
<p>The launch config for the container is specified int he <code>.devcontainer/devcontainer.json</code> file, replacing
the usual docker-compose.yml or the docker run command. So any container config should be modified here.</p>
<p>All the image config is in the Dockerfile as usual. IF the underlying image needs to be modified its here.</p>
<h1 id="debugging-the-dev-environment"><a class="header" href="#debugging-the-dev-environment">Debugging the dev-environment</a></h1>
<h3 id="port-already-in-use"><a class="header" href="#port-already-in-use">Port already in use</a></h3>
<ul>
<li><code>docker ps</code></li>
<li>This will show a list with all the running containers in your PC, you cant have two containers bind to
the same port, so if there is one already running it must be stopped. This happens when the IDE doesn't close
the dev-container when closed. It's mostly an issue with VSCode.</li>
<li>Take the "CONTAINER ID" and run <code>docker stop ${CONTAINER ID}</code></li>
<li>Try opening the dev container again, if it doesn't work there is another process using the port,
the simplest way to deal with it is rebooting the machine or changing the host port (the one on the left of the : )
in the <code>.devcontainer/devcontainer.json</code> file.</li>
</ul>
<h3 id="cant-bind-a-volume"><a class="header" href="#cant-bind-a-volume">Cant bind a volume</a></h3>
<p>The most usual cause is that the directory doest exist,
have you forgotten to comment the x11 line in the <code>.devcontainer/devcontainer.json</code> file?</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../informatique/mise_en_place/python.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../informatique/architecture.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../informatique/mise_en_place/python.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../informatique/architecture.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
